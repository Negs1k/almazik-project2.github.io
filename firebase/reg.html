<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Auth | Регистрация и Вход</title>
    <link rel="stylesheet" href="firebase/reg.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="welcome-screen" id="welcomeScreen">
            <div class="logo">
                <i class="fas fa-fire"></i>
                <h1>Firebase Auth</h1>
            </div>
            <p class="tagline">Безопасная аутентификация для пользователя</p>
            <div class="buttons">
                <button class="btn btn-primary" onclick="showAuth('login')">
                    <i class="fas fa-sign-in-alt"></i> Войти
                </button>
                <button class="btn btn-secondary" onclick="showAuth('register')">
                    <i class="fas fa-user-plus"></i> Зарегистрироваться
                </button>
            </div>
        </div>

        <div class="auth-form" id="loginForm" style="display: none;">
            <div class="form-header">
                <button class="back-btn" onclick="showWelcome()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Вход в аккаунт</h2>
            </div>
            
            <div class="social-auth">
                <button class="btn-google" onclick="signInWithGoogle()">
                    <i class="fab fa-google"></i> Войти через Google
                </button>
                <div class="divider">
                    <span>или</span>
                </div>
            </div>
            
            <form id="loginFormFields" onsubmit="event.preventDefault(); login();">
                <div class="form-group">
                    <label for="loginEmail">
                        <i class="fas fa-envelope"></i> Email адрес
                    </label>
                    <input type="email" id="loginEmail" required placeholder="your@email.com">
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">
                        <i class="fas fa-lock"></i> Пароль
                    </label>
                    <input type="password" id="loginPassword" required placeholder="Введите пароль">
                    <button type="button" class="show-password" onclick="togglePassword('loginPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <div class="form-options">
                    <label class="checkbox">
                        <input type="checkbox" id="rememberMe">
                        <span>Запомнить меня</span>
                    </label>
                    <a href="#" class="forgot-password" onclick="showForgotPassword()">Забыли пароль?</a>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Войти
                </button>
                
                <div class="form-footer">
                    <p>Нет аккаунта? <a href="#" onclick="showAuth('register')">Зарегистрируйтесь</a></p>
                </div>
            </form>
        </div>

        <div class="auth-form" id="registerForm" style="display: none;">
            <div class="form-header">
                <button class="back-btn" onclick="showWelcome()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Создать аккаунт</h2>
            </div>
            
            <div class="social-auth">
                <button class="btn-google" onclick="signInWithGoogle()">
                    <i class="fab fa-google"></i> Зарегистрироваться через Google
                </button>
                <div class="divider">
                    <span>или</span>
                </div>
            </div>
            
            <form id="registerFormFields" onsubmit="event.preventDefault(); register();">
                <div class="form-group">
                    <label for="registerName">
                        <i class="fas fa-user"></i> Имя
                    </label>
                    <input type="text" id="registerName" required placeholder="Введите ваше имя">
                </div>
                
                <div class="form-group">
                    <label for="registerEmail">
                        <i class="fas fa-envelope"></i> Email адрес
                    </label>
                    <input type="email" id="registerEmail" required placeholder="your@email.com">
                </div>
                
                <div class="form-group">
                    <label for="registerPassword">
                        <i class="fas fa-lock"></i> Пароль
                    </label>
                    <input type="password" id="registerPassword" required placeholder="Придумайте пароль">
                    <button type="button" class="show-password" onclick="togglePassword('registerPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="password-hint">
                        Пароль должен содержать минимум 6 символов
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="registerConfirmPassword">
                        <i class="fas fa-lock"></i> Подтвердите пароль
                    </label>
                    <input type="password" id="registerConfirmPassword" required placeholder="Повторите пароль">
                    <button type="button" class="show-password" onclick="togglePassword('registerConfirmPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <div class="form-options">
                    <label class="checkbox">
                        <input type="checkbox" id="acceptTerms" required>
                        <span>Я принимаю <a href="#" onclick="showTerms()">условия использования</a></span>
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-user-plus"></i> Зарегистрироваться
                </button>
                
                <div class="form-footer">
                    <p>Уже есть аккаунт? <a href="#" onclick="showAuth('login')">Войдите</a></p>
                </div>
            </form>
        </div>

        <div class="auth-form" id="forgotPasswordForm" style="display: none;">
            <div class="form-header">
                <button class="back-btn" onclick="showAuth('login')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Восстановление пароля</h2>
            </div>
            
            <p class="form-description">Введите ваш email, и мы отправим вам ссылку для восстановления пароля.</p>
            
            <form id="forgotPasswordFormFields" onsubmit="event.preventDefault(); resetPassword();">
                <div class="form-group">
                    <label for="resetEmail">
                        <i class="fas fa-envelope"></i> Email адрес
                    </label>
                    <input type="email" id="resetEmail" required placeholder="your@email.com">
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-paper-plane"></i> Отправить ссылку
                </button>
                
                <div class="form-footer">
                    <p><a href="#" onclick="showAuth('login')">Вернуться ко входу</a></p>
                </div>
            </form>
        </div>

    <div class="profile-screen" id="profileScreen" style="display: none;">
        <div class="profile-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> Назад
            </button>
            <h2>Мой профиль</h2>
        </div>
        
        <div class="profile-info-section">
            <div class="profile-avatar-large" id="userAvatar">
                <i class="fas fa-user"></i>
            </div>
            
            <div class="user-details">
                <h2 id="userDisplayName">Имя пользователя</h2>
                <p id="userEmail">email@example.com</p>
                <p class="account-info" id="accountInfo"></p>
            </div>
        </div>
        
        <div class="profile-stats">
            <div class="stat-card">
                <i class="fas fa-calendar"></i>
                <div>
                    <h3>Дата регистрации</h3>
                    <p id="userCreatedAt">--</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-shield-alt"></i>
                <div>
                    <h3>Статус</h3>
                    <p id="userStatus">Не подтвержден</p>
                </div>
            </div>
        </div>
        
        <div class="profile-actions">
            <button class="btn-action" onclick="verifyEmail()">
                <i class="fas fa-envelope"></i> Подтвердить email
            </button>
            <button class="btn-action" onclick="changePassword()">
                <i class="fas fa-key"></i> Сменить пароль
            </button>
            <button class="btn-action" onclick="deleteAccount()">
                <i class="fas fa-trash"></i> Удалить аккаунт
            </button>
        </div>
        
        <div class="firebase-info">
            <p><i class="fas fa-database"></i> Данные сохраняются в Firebase Realtime Database</p>
        </div>
    </div>
        <div class="notification" id="notification">
            <span id="notificationMessage"></span>
            <button onclick="hideNotification()"><i class="fas fa-times"></i></button>
        </div>

        <div class="loader" id="loader">
            <div class="spinner"></div>
        </div>
    </div>

    <div class="modal" id="termsModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Условия использования</h3>
                <button class="close-modal" onclick="closeModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>Это демонстрационный сайт для тестирования Firebase Authentication.</p>
                <p>Все данные хранятся в защищенной базе данных Firebase.</p>
                <p>Мы не передаем ваши данные третьим лицам.</p>
                <p>Используя этот сервис, вы соглашаетесь с нашими правилами.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal()">Понятно</button>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="index.js"></script>
</body>
</html>